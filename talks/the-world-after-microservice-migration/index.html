<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/https://keyvanakbary.github.io/learning-notes/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/https://keyvanakbary.github.io/learning-notes/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/https://keyvanakbary.github.io/learning-notes/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/https://keyvanakbary.github.io/learning-notes/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>The World after Microservice Migration | Notes</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="The World after Microservice Migration" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Keyvan Akbary learning notes" /> <meta property="og:description" content="Keyvan Akbary learning notes" /> <meta property="og:site_name" content="Notes" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="The World after Microservice Migration" /> <script type="application/ld+json"> {"headline":"The World after Microservice Migration","description":"Keyvan Akbary learning notes","@type":"WebPage","url":"/https://keyvanakbary.github.io/learning-notes/talks/the-world-after-microservice-migration/","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/https://keyvanakbary.github.io/learning-notes/" class="site-title lh-tight"> Notes </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/https://keyvanakbary.github.io/learning-notes/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/https://keyvanakbary.github.io/learning-notes/articles/" class="nav-list-link">Articles</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/https://keyvanakbary.github.io/learning-notes/books/" class="nav-list-link">Books</a><ul class="nav-list "></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/https://keyvanakbary.github.io/learning-notes/talks/" class="nav-list-link">Talks</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/https://keyvanakbary.github.io/learning-notes/papers/" class="nav-list-link">Papers</a><ul class="nav-list "></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Notes" aria-label="Search Notes" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/keyvanakbary/learning-notes" class="site-button" > Learning Notes on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/https://keyvanakbary.github.io/learning-notes/talks/">Talks</a></li> <li class="breadcrumb-nav-list-item"><span>The World after Microservice Migration</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="the-world-after-microservice-migration"> <a href="#the-world-after-microservice-migration" class="anchor-heading" aria-labelledby="the-world-after-microservice-migration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a href="https://www.youtube.com/watch?v=MxhcFPRkzlw">The World after Microservice Migration</a> </h1> <h2 id="motivation"> <a href="#motivation" class="anchor-heading" aria-labelledby="motivation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Motivation </h2> <p>Car-sharing application integration and aggregation into the system. Not caring about the technical debt, right to bite you in the ass at the end.</p> <p>Providers as microservices. There is a gateway that either goes to providers or to an aggregator of internal services.</p> <p>Providers can be extracted from the monolith. They needed some kind of dynamic routing for this.</p> <h2 id="service-mesh"> <a href="#service-mesh" class="anchor-heading" aria-labelledby="service-mesh"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Service mesh </h2> <blockquote> <p>A dedicated infrastructure layer for making service-to-service communication safe, fast and reliable.</p> </blockquote> <ul> <li>Dynamic routing</li> <li>Load-balancing</li> <li>Retryable failures</li> <li>Circuit-breaking</li> <li>Distributed tracing and metrics</li> </ul> <p>We are already familiar with these concepts, the difference is that we want to extract all this behaviour from your application code.</p> <ul> <li>Linkerd v1</li> </ul> <h3 id="linkerd-deployment-models"> <a href="#linkerd-deployment-models" class="anchor-heading" aria-labelledby="linkerd-deployment-models"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linkerd deployment models </h3> <ul> <li>All services talk to a single linkerd instance</li> <li>Each service talk to a service linkerd sidecar. You can do as outgoing or incoming call. Then you can use Zipkin to analise and measure calls.</li> </ul> <p>POST http://free2move.com/providers/drive2move/login</p> <p>1) Identification. Where to route can be identified by header Host, the path, or by method like POST 2) Binding the services that will match with the identification, starting from top to bottom 3) Resolution, after we get a Consul namer por example, we resolve the IPs</p> <p>Take into account that there is a little performance of having Linkerd intermediate between requests</p> <h4 id="linkerd-20"> <a href="#linkerd-20" class="anchor-heading" aria-labelledby="linkerd-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linkerd 2.0 </h4> <p>Linkerd is not precisely light. You shouldnâ€™t be deploying it with your application. The idea is to have a proxy sidecar (data plane) and the whole Linkerd logic plus configuration in Kubernetes or in another place (control plane).</p> <h3 id="alernatives-to-linkerd"> <a href="#alernatives-to-linkerd" class="anchor-heading" aria-labelledby="alernatives-to-linkerd"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Alernatives to Linkerd </h3> <ul> <li>Istio, which looks like Linkerd 2.0</li> <li>Consul connect that now includes a service mesh with Istio</li> </ul> <h2 id="consumer-driven-contract-testing"> <a href="#consumer-driven-contract-testing" class="anchor-heading" aria-labelledby="consumer-driven-contract-testing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Consumer-Driven Contract testing </h2> <p><a href="https://docs.pact.io/">Pact</a> framework for doing contract testing, the specification of the contract.</p> <ul> <li>How does a request/response format look</li> <li>Upstream/downstream</li> <li>The client defines the contract, and the provider the one that implements it</li> </ul> <p>Pact generates contract files that you can upload to the Pact broker, you can see a graph of your services. On the build pipeline, we can run the tests with the contracts against real services. You can combine it with Swagger too.</p> <p>For legacy applications you can use WireMock to check for recording incoming and outcoming requests.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
